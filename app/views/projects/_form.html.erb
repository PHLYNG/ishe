<script type="text/javascript">
$(document).ready(function() {
  // change color of radio button label to show radio button is selected
  $('.rdio').on('click', function() {
    $('.rdio').css('background-color','white')
    $(this).css('background-color', 'hotpink')
  });
  //change label to name of file/image that will be uploaded
  $("input[type='file']").change(function() {
    // resize label to fit filename/path
    $(".image-label").html($(this).val());
    var size = $(this).val().length;
    $(".image-label").css('width', size*10)
  });
});
</script>

<h2>Please select a type of project, the cross-streets and upload an image.</h2>

  <%= form_for @project, url: projects_path, html: {multipart: true, class: "form-group"} do |f| %>

    <h4>Project Type</h4>

    <%= f.radio_button(:project_type,"Pothole") %>
    <%= f.label :project_type_pothole,"Pothole", class: 'form-control rdio'  %>

    <%= f.radio_button(:project_type,"Planting") %>
    <%= f.label :project_type_planting,"Tree Planting", class: 'form-control rdio' %>

    <%= f.radio_button(:project_type,"Painting") %>
    <%= f.label :project_type_painting,"Painting", class: 'form-control rdio'  %>

    <%= f.radio_button(:project_type,"Trash") %>
    <%= f.label :project_type_trash,"Trash/Debris Cleanup", class: 'form-control rdio'  %>

    <h4>Cross Streets (the ones you are closest to)</h4>

  <div class="new-streets-container">

    <p>Click the button to get your coordinates.</p>

    <button onclick="getLocation()" id="gps-button">Try It</button>

    <p id="gps-fail" style="color: red;"></p>

    <%= f.label :street1,"Latitude", class: 'new-streets new-streets-label'  %>
    <%= f.text_field :street1, class: 'form-control new-streets new-streets-field', id: "lat-field" %>
    <br>
    <%= f.label :street2,"Longitude", class: 'new-streets new-streets-label' %>
    <%= f.text_field :street2, class: 'form-control new-streets new-streets-field', id: "long-field"  %>
  </div>

    <%= f.label :photo, "Upload an Image", class: 'image-label' %>
    <%= f.file_field :photo, class: 'form-control' %>

  <button class="btn btn-success">
    <%= f.submit 'Submit New Project' %>
  </button>
<% end %> <!-- End of form helper -->

<script type="text/javascript">
// geolocation for streets, city, state
var lat = document.getElementById("lat-field");
var long = document.getElementById("long-field");

function getLocation() {
  if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition, {
        enableHighAccuracy: true
      });
  } else {
      document.getElementById('gps-fail').innerHTML = "Geolocation is not supported by this browser.";
  }
}
function showPosition(position) {
  lat.value = position.coords.latitude
  long.value = position.coords.longitude;
}
</script>
